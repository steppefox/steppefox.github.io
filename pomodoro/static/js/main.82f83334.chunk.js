(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(42)},38:function(e,t,n){},39:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(6),c=n.n(r),o=n(5),l=n(4),s=n.n(l),u=n(14),m=n.n(u),f=(n(38),function(){return i.a.createElement("div",null,i.a.createElement("span",{className:"link-title"},"Keybindings"),i.a.createElement("div",{className:"keybindings"},i.a.createElement("div",null,"Start / Pause \u2014\xa0",i.a.createElement("kbd",null,"Spacebar")),i.a.createElement("div",null,"Reset \u2014 ",i.a.createElement("kbd",null,"r"))))}),d=function(e){var t=e.notifications,n=e.onClick;return i.a.createElement("div",{className:"notifications"},!t&&i.a.createElement("div",null,i.a.createElement("span",{onClick:n,className:"link"},"Enable notifications"),i.a.createElement("span",{className:"spacer"},"|")))},E=function(){return i.a.createElement("a",{className:"link",href:"http://github.com/tomspeak/pomodo.work"},"Code")},v=n(17),b=(n(39),function(e){var t=e.className;return i.a.createElement("svg",{className:t,viewBox:"0 0 242 216"},i.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.a.createElement("text",{fill:"#191E3F",fontFamily:"Zapf Dingbats",fontSize:"300",fontWeight:"normal"},i.a.createElement("tspan",{x:"-9.95703125",y:"212",fill:"#000000"},"\u274d"))))}),k=function(e){var t=e.current,n=e.max;return i.a.createElement("div",{className:"count"},Object(v.a)(Array(n)).map(function(e,n){return i.a.createElement(b,{key:n,className:t>n?"is-active":""})}))},T=function(e){var t=e.title,n=e.disabled,a=e.onClick;return i.a.createElement("button",{disabled:n,className:"button",onClick:a},t)};function p(e){var t=I(Math.floor(e/60)),n=I(e%60);return"".concat(t," : ").concat(n)}function I(e){return e=e<10?"0"+e:e}function w(e,t){return Math.round(t-e)}function g(){return Math.floor(Date.now()/1e3)}var N=function(){var e=g();return function(t,n){if(n().intervalId)return t(O(n().intervalId));var a=setInterval(function(){return n().time<=0?t(h(n())):t({type:"TIMER_TICK",time:w(e,g())})},1e3);return t({type:"TIMER_START",intervalId:a,startTime:e})}},O=function(e){return clearInterval(e),{type:"TIMER_PAUSE"}},y=function(){return function(e,t){return clearInterval(t().intervalId),e({type:"TIMER_RESET",intervalId:null})}},h=function(){return function(e,t){var n=t(),a=n.isFinale,i=n.intervalId,r=n.count,c=n.isBreak;clearInterval(i),4===r&&(a=!0);var o=c?"work":"relax";return function(e){try{if(!Notification)return console.warn("Browser does not support notifications"),!1;if("granted"!==Notification.permission)return console.log("Tried to send notification when they are not enabled"),!1;var t=new Notification("Pomodo",{icon:"/img/icon.png",vibrate:!0,body:e});setTimeout(t.close.bind(t),5e3)}catch(n){console.error("Error: Creating notification"),console.error(n)}}("".concat(c?"Break":"Work"," has ended, time to ").concat(o,"!")),e({type:"TIMER_END",isFinale:a,meta:{sound:"notification"}})}},j=function(e){return{type:"NOTIFICATIONS_SET",toggle:e}},R=function(){return function(e){try{Notification.requestPermission(function(e){return B(e)})}catch(t){console.error("Error: Requesting notifications permission"),console.error(t)}}},B=function(e){return function(t){switch(e){case"granted":return t(j(!0));default:return t(j(!1))}}};function C(){var e=Object(o.c)(function(e){return e}),t=e.time,n=e.isBreak,r=e.count,c=e.maxCount,l=e.isActive,s=e.notifications,u=Object(o.b)(),v=Object(a.useCallback)(function(){u(N())},[u]),b=Object(a.useCallback)(function(){u(y())},[u]),I=Object(a.useCallback)(function(e){switch(e.code){case"Space":v();break;case"KeyR":b()}},[b,v]);Object(a.useEffect)(function(){return window.addEventListener("keyup",I),u(R()),function(){return window.removeEventListener("keyup",I)}},[u,I]),Object(a.useEffect)(function(){document.title=p(t)},[t]);return i.a.createElement("div",{className:m()({container:!0})},i.a.createElement("div",null,i.a.createElement("div",{className:"box"},i.a.createElement("div",{className:"timer"},p(t)),i.a.createElement(T,{title:l?"Pause":n?"Break":"Work",onClick:v}),i.a.createElement(T,{title:"Reset",onClick:b}),i.a.createElement(k,{current:r,max:c})),i.a.createElement("div",{className:"links hide-mobile"},i.a.createElement("div",{className:"link"},i.a.createElement(f,null)),i.a.createElement("span",{className:"spacer"},"|"),i.a.createElement(d,{notifications:s,onClick:function(e){e.preventDefault(),u(R())}}),i.a.createElement(E,null))))}var S,M=n(3),A=n(15),_=n.n(A),x=n(16),P=n(1),F={breakTime:300,count:0,intervalId:null,isActive:!1,isBreak:!1,isFinale:!1,longBreakTime:900,maxCount:4,startTime:0,time:1500,workTime:1500,notifications:!1},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TIMER_START":return Object(P.a)(Object(P.a)({},e),{},{intervalId:t.intervalId,isActive:!0,startTime:t.startTime});case"TIMER_TICK":return Object(P.a)(Object(P.a)({},e),{},{time:(e.wasPaused?e.pausedTime:e.count>=4&&e.isBreak?e.longBreakTime:e.isBreak?e.breakTime:e.workTime)-t.time});case"TIMER_PAUSE":return Object(P.a)(Object(P.a)({},e),{},{isActive:!1,intervalId:null,startTime:0,wasPaused:!0,pausedTime:e.time});case"TIMER_END":return Object(P.a)(Object(P.a)({},e),{},{intervalId:null,isActive:!1,startTime:0,isBreak:!e.isBreak,count:t.isFinale?0:e.isBreak?e.count:e.count+1,time:e.count>=3&&!e.isBreak?e.longBreakTime:e.isBreak?e.workTime:e.breakTime,wasPaused:!1,pausedTime:0});case"TIMER_RESET":return Object(P.a)(Object(P.a)({},F),{},{notifications:e.notifications});case"NOTIFICATIONS_SET":return Object(P.a)(Object(P.a)({},e),{},{notifications:t.toggle});default:return e}},K=[x.a,_()({notification:"/pomodoro/assets/audio/notification.mp3"})];s.a.get("state")&&(S=s.a.get("state"));var W=Object(M.c)(D,S,M.a.apply(void 0,K));W.subscribe(function(){s.a.set("state",W.getState())}),window.onbeforeunload=function(){W.dispatch(O(W.getState().intervalId))};var q=document.getElementById("root");c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(o.a,{store:W},i.a.createElement(C,null))),q)}},[[18,1,2]]]);
//# sourceMappingURL=main.82f83334.chunk.js.map